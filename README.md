# VK App
\*Неофициальное приложение

![cover](https://github.com/mayer1a/iOSAppUI/blob/main/DescriptionImages/cover.png)

---

## Что это за проект?

Привет!
Мой проект - это приложение-клиент для социальной сети VK. 

В этом приложение ты можешь:
* Безопасно авторизоваться в свой аккаунт через веб интерфейс
* Просмотреть своих друзей и их фотографии
* Увидеть свои группы и найти новые
* Почитать свою ленту новостей, а возможно и оценить новость
* Насладиться кастомными анимациями (нажми на фотографию друга или группы)

Для чего я решил создать этот клиент? Официальный клиент достаточно объемный с большим количеством функций, которые зачастую могут быть не нужны, 
а некоторые вообще в них теряются. 
Поэтому я решил создать простой, понятный, красивый и легкий клиент для просмотра друзей, своих групп, поиска новых и просмотра ленты новостей, 
что зачастую многим будет достаточно.
 
---

## Полные требования к проекту ~~(дополняются)~~

- [X] Применить такие коллекции как **UITableView/UICollectionView**
- [X] Применить следующие паттерны:
    - [X] Singleton
    - [X] Observable
- [X] Создать 6ь и более экранов
- [X] Использовать **UITabBarController/UINavigationController** для навигации в приложении
- [X] Использовать **KeyChain** при помощи **SwiftKeychainWrapper** для хранения токена, информации владельца аккаунта после авторизации
- [X] Использовать **UserDefaults** для хранения малых объемов структурированной мета-информации
- [X] Реализовать хранение друзей, групп в **Realm**
- [X] Использовать кэширование фотографий/видео при помощи собственной сервиса кэширования - обертки над **FileManager**
- [X] Использовать сеть и реализовать более 3х сетевых запросов
- [X] Использовать **Decodable** модели данных и модели данных **Realm**
- [X] Реализовать собственный сервис вычисления измененных индексов в **Realm** для обновления только измененных ячеек
- [X] Использовать, допольнительно к основной, глобальную и собственную очереди
- [X] Использовать протоколы и замыкания для взаимодействия между классами
- [X] Реализовать интерективную анимацию перелистывания фотогрфий с отслеживанием прогресса
- [X] Реализовать кастомный поиск по группам в хедере таблицы с собственной анимацией
- [X] Использовать **PromiseKit** для загрузки с сервера, парсинга, сохранения групп в **Realm** и отображения данных в коллекции
- [X] Реализовать предзагрузку новостей, паггинацию новостей - бесконечная новостная лента
- [X] Использовать для отображения новости секцию, составляемую из набора ячеек, в зависимости от типа новости
- [X] Реализовать поддержку светлой и темной системных тем
- [X] Реализовать получение новых новостей через __pull to refresh__
- [X] Реализовать работу с сетью через синглтон сесии
- [X] Использовать **Alamofire** и **URLSession**
- [X] Использовать **Operation** для асинхронного получения, парсинга и сохранения в **Realm** новостей
- [X] Реализовать кастомные ячейки для друзей, фотографий, групп и новостей
- [X] Создать собственный контрол для лайков и их количества у фотографий пользователя
- [X] Реализовать возможность адаптивного расположения фотографий пользователя в зависимости от ориентации интерфейса (количество фотографий в строке) 
- [X] Реализовать обновление коллекций с друзьями, фотографиями друзей и групп при изменении данных в **Realm** через observer
- [X] Исползовать Firebase для хранения групп пользователя
- [X] Сделать кастомные анимации **UIView**
- [X] Реализовать астомные анимации переходов между экранами через **UINavigationController** с использованием аниматора **UIViewControllerAnimatedTransitioning**
- [X] Реализовать **WebKitViewController** для авторизации в VK
- [X] Реализовать кастомное взаимодействие перехода **UIPercentDrivenInteractiveTransition** при помощи **UIScreenEdgePanGestureRecognizer**
- [X] Реализовать возможность смены/выхода из учетной записи
- [X] Определить минимальную поддерживаемую версию OS: **iOS 15.0**
- [X] Использовать пакетные менеджер **CocoaPods**
- [X] Реализовать затемнения фона фотографии при тапе на ней

## Концепт

![concept](https://github.com/mayer1a/iOSAppUI/blob/main/DescriptionImages/concept.png)

Как видишь, все 5ь экранов отличаются своей простотой и дружелюбностью, всё понятно и ясно.
* Главный экран - экран друзей, в нем через выбора друга можно перейти в его фотографии.
* На экране фотографий можно перейти в режим полноэкранного просмотра фотографий.
* Экран групп отличается кастомным поиском в хедере таблицы с собственной анимацией.
* Новости - третий экран в таббаре, в нём отображаются новости в разных форматах, в зависимости от типа новости.
* Опциональный первый экран (если токен авторизации еще не был получен или истек) - стандартная веб авторизации через VK.

## Поддержка системных тем

![themes](https://github.com/mayer1a/iOSAppUI/blob/main/DescriptionImages/lightDarkTheme.png)

Поддерживаются системные темы, при переходе системы в темный режим, приложение перестраивает цветовую палитру.

## Анимации

![themes](https://github.com/mayer1a/iOSAppUI/blob/main/DescriptionImages/friendsPhotosTrans.gif)

1. На экранах друзей и групп можно увидеть пружинную анимацию аватара, если нажать на неё. 
2. Переход на экраны фотографий сопровождаются кастомными анимациями загрузки в виде облака и перехода - выезжающей вью, прикрепленной в правом верхнем углу.
3. На экране фотографий пользователя при тапе на кнопку лайка можно увидеть прыгающую анимацию с переворотом сердца и изменение его цвета, а также движение label с количеством лайков.
4. Переход в режим полноэкранного просмотра фотографии происходит увеличеним вью из той ячейки коллекции, на фотографию которой был тап.

![themes](https://github.com/mayer1a/iOSAppUI/blob/main/DescriptionImages/photosTransOrient.gif)

1. При смене фотографии в полноэкранном режиме просмотра жестом влево можно наблюдать анимацию уменьшения текущей фотографии и ее отъезд влево за экран, и выезд справа следующей фотографии. При свайпе вправа, анимация проигрывается наоборот.
2. При тапе на фотографию в полноэкранном режиме анимированно меняется цвет фона и исчезает navigation bar.
3. При просмотре фотографии в полноэкранном режиме при смене ориентации интерфейса в горизонтальное положение уменьшается размер изображения.

![themes](https://github.com/mayer1a/iOSAppUI/blob/main/DescriptionImages/groupsNewsFullPhotoBackground.gif)

1. Если выбрать строку поиска на экране групп, будут анимированы скрытая кнопка, которая выезжает справа, длина textfield уменьшится, а иконка лупы отъедет в левый край хедера таблицы. Если нажать "Отмена", произойдет обратная анимация.
2. При свайпе сверху на экране новостей анимация pull-to-refresh
3. При просмотре фотографии в полноэкранном режиме в горизонтальной ориентации интерфейса положение происходит анимация удаления navigation bar и увеличение размера фотографии.

![themes](https://github.com/mayer1a/iOSAppUI/blob/main/DescriptionImages/friendsNewsToggleAppearance.gif)

1. Анимация загрузки при переходе с экрана друзей на экран фотографий выбранного друга в тёмном режиме.
2. Адаптация цветовой палитры при смене системного режима.

---

## Поддержка и вклад

Если ты хочешь сделать вклад в этот проект, я всегда рад принять твой merge request.

## Помощь

Если тебе нужно связаться со мной или получить помощь по проекту, 
то не стесняйся - пиши на <a href="mailto:mayer1art@gmail.com">почту</a> и в <a href="https://t.me/mayer1a">телеграм</a>

---

## Благодарность

Все иконки в приложении взяты с сайта https://www.flaticon.com

Для получения информации с сайта https://vk.com используется их собственный VK-Api взяты https://dev.vk.com
